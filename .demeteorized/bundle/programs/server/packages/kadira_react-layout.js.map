{"version":3,"sources":["kadira:react-layout/lib/react_layout.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA,iB;AACA,gC;AACA,+B;;AAEA,uC;AACA,yC;;AAEA,gB;AACA,oB;AACA,U;AACA,oD;AACA,mC;AACA,G;AACA,E;;AAEA,qD;AACA,uB;AACA,2D;AACA,U;AACA,2D;AACA,G;AACA,E;;AAEA,4D;AACA,qD;AACA,sC;;AAEA,yC;AACA,kE;AACA,iD;AACA,6B;AACA,G;AACA,E;;AAEA,4D;AACA,kB;AACA,0B;AACA,uC;AACA,kD;AACA,6C;AACA,yD;AACA,mD;AACA,4C;AACA,Y;AACA,gD;AACA,K;AACA,K;AACA,E;;AAEA,mC;AACA,2D;AACA,Q;AACA,E","file":"/packages/kadira_react-layout.js","sourcesContent":["ReactLayout = {};\nReactLayout._currentLayoutClass;\nReactLayout._currentLayoutComp;\n\nReactLayout._getRootNode = function() {\n  var rootNode = $('#react-root').get(0);\n\n  if(rootNode) {\n    return rootNode;\n  } else {\n    $('body').append('<div id=\"react-root\"></div>');\n    return $('#react-root').get(0);\n  }\n};\n\nReactLayout.render = function(layoutClass, regions) {\n  if(Meteor.isClient) {\n    return ReactLayout._renderClient(layoutClass, regions);\n  } else {\n    return ReactLayout._renderServer(layoutClass, regions);\n  }\n};\n\nReactLayout._renderServer = function(layoutClass, regions) {\n  var el = React.createElement(layoutClass, regions);\n  var html = React.renderToString(el);\n\n  if(Package['kadira:flow-router-ssr']) {\n    var FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n    var ssrContext = FlowRouter.ssrContext.get();\n    ssrContext.setHtml(html);\n  }\n};\n\nReactLayout._renderClient = function(layoutClass, regions) {\n  var self = this;\n  self._ready(function() {\n    var rootNode = self._getRootNode();\n    if(self._currentLayoutClass !== layoutClass) {\n      self._currentLayoutClass = layoutClass;\n      var el = React.createElement(layoutClass, regions);\n      var renderdComp = React.render(el, rootNode);\n      self._currentLayoutComp = renderdComp;\n    } else {\n      self._currentLayoutComp.setProps(regions);\n    }\n  });\n};\n\nReactLayout._ready = function(cb) {\n  // may be we need to come up with a better way to do this\n  $(cb);\n};"]}